@using Entities.Models

<div id="page" class="full-page">
    <header id="masthead" class="site-header header-primary">
        <!-- header html start -->

        <div class="mobile-menu-container"></div>
    </header>
    <main id="content" class="site-main">
        <!-- Inner Banner html start-->
        <section class="inner-banner-wrap">
            <div class="inner-baner-container" style="background-image: url(../../Content/Images/Backgrounds/Horizont.jpg);">
                <div class="container">
                    <div class="inner-banner-content">
                        <h1 class="inner-title">Products Cart</h1>
                    </div>
                </div>
            </div>
            <div class="inner-shape"></div>
        </section>
        <!-- Inner Banner html end-->
        <div class="cart-section">
            <div class="container">
                <div class="cart-list-inner">
                    <form action="#">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th>Product Name</th>
                                        <th>Price</th>
                                        <th>Quantity</th>
                                        <th>Sub Total</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @if (!((List<Item>)Session["cart"] == null))
                                    {
                                        foreach (var item in (List<Item>)Session["cart"])
                                        {

                                            <tr>
                                                <td><a href="@Url.Action("Remove", "Cart", new { id = item.Package.PackageId })">x</a></td>
                                                <td class="">


                                                    <span class="cartImage"><img src="@item.Package.MainPhoto" alt="image"></span>
                                                </td>
                                                <td data-column="Product Name">@item.Package.Title</td>
                                                <td data-column="Price">$ @(item.Package.Price - item.Package.Price * 11 / 100) </td>
                                                <td data-column="Quantity" class="count-input">
                                                    <div>
                                                        @*<a class="minus-btn" id="minus-btn"  ><i class="fa fa-minus"></i></a>*@
                                                        <a href="@Url.Action("RemoveOnce", "Cart", new { id = item.Package.PackageId })"><h4>-</h4></a>
                                                        <input id="quantity" class="quantity" type="text" value="1">
                                                        <a href="@Url.Action("Buy", "Cart", new { id = item.Package.PackageId })"><h4>+</h4></a>

                                                    </div>
                                                </td>
                                                <td data-column="Sub Total" id="ZZZ">$ @(item.Package.Price*item.Quantity) </td>
                                            </tr>

                                        }
                                    }

                                </tbody>

                            </table>
                        </div>
                        @if (!((List<Item>)Session["cart"] == null))
            {
                    <div class="totalAmountArea">
                        @{
                            List<Item> cart = (List<Item>)Session["cart"];
                            var total = cart.Sum(item => item.Package.Price * item.Quantity);

                        }
                        <ul class="list-unstyled">
                            <li><strong>Sub Total</strong> <span>$ @(total-total*11/100)</span></li>
                            <li><strong>Vat</strong> <span>$ @(total*11/100)</span></li>

                            <li><strong>Grand Total</strong> <span class="grandTotal">$ @total</span></li>
                        </ul>
                    </div>
            }
                            
                        <div class="checkBtnArea text-right">
                            <a href="#" class="button-primary">checkout</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <a id="backTotop" href="#" class="to-top-icon">
        <i class="fas fa-chevron-up"></i>
    </a>
    <!-- custom search field html -->
    <div class="header-search-form">
        <div class="container">
            <div class="header-search-container">
                <form class="search-form" role="search" method="get">
                    <input type="text" name="s" placeholder="Enter your text...">
                </form>
                <a href="#" class="search-close">
                    <i class="fas fa-times"></i>
                </a>
            </div>
        </div>
    </div>
    <!-- header html end -->  
</div>

@*@section scripts{
    <script>
      

            $("#plus-btn").click(function () {
                var settings = {
                    "url": "https://localhost:44335/Cart/Index?id=1",
                    "method": "GET",
                    "timeout": 0,
                    "headers": {
                        "Cookie": "ASP.NET_SessionId=1mzkh0finbondutmtz2fdrlb"
                    },
                };

                $.ajax(settings).done(function (response) {
                    console.log(response);
                });
            });

      

    </script>

    <script>
            //$('.minus-btn').click(function () {
            //    let a = $(this).parent().children('input.quantity').val()
                 
            //    console.log(a);
            //    $('#ZZZ').html(a)
                 
            //    let ele = $('#quantity');
            //    ele.val(a) 
            //    console.log(ele.val());
                
            //})



    </script>
   
    
    
    
    
    
    
    }*@




